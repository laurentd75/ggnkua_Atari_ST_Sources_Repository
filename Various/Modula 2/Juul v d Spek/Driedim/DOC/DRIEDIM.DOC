0660103030566
1
2- # -
9[....................................................]

âInhoudÅ:Ä


1)Introductie.

2)Start.

3)BewegenindeDrieDimwereld.

4)Hiddenlineremoval.

5)Picturemode.

6)Diversen.

7)DeDrieDimsource.

8)Opmerkingen.

AppendixA:Voorbeeld.

Å1)âIntroductieÄ.

HetprogrammaDriedimiseenuitvloeiselvaneenverzoekvan
eenbevriendbouwkundestudentomeenprogrammawaarmee
redelijksnelperspectiefschetsenvanbveengebouw,vanuit
willekeurigegezichtspuntengezien,kondenwordengemaakt.Een
eersteversiewerdgeschreveninPASCALopeennietgrafisch
georienteerdcomputersysteem(VAXonderVMS),waarmeehet
mogelijkwasomvaneenbeschrijvingvanhettetekenen
voorwerpineeneenvoudigebescrijvingstaal,eengezichtspunt
eneenkijkrichting,eentekeningaantemaken.Almetaleen
nietalteeenvoudigeprocedure,daareengebruikerzich
altijdbewustmoestzijnvaneencoôrdinatenstelselwaarin
hij/zijzichbewoog.

Eentweede(grofwegdehuidige)versiewerdgeschrevenin
MODULA-2nadatikmijnSThadaangeschaft.Degrafische
mogelijkhedenvandezemachinewerdenbenutomhetuser
interfacewatnatuurlijkertemaken:inplaatsvanhet
herhaaldelijkinvoerenvandecoôrdinatenvangezichtspunten
kijkrichting,kandegebruikerzichnubeschouwenalseen
wandelaardiezichdoorenomhettebekijkenobjectheenkan
bewegenmetcommando'sals'daarheen','eentikjevooruit',
etc.Hetisnogslechtsincidenteelnodigomintermenvanhet
onderliggendcoôrdinatenstelseltedenken.

Deobjectbeschrijvingmoetnogsteedsmetdehandaangemaakt
wordenalseentekstineenbeschrijvingstaal.Driedimbiedt
hiervoor(nog)geenfaciliteiten.

EenkortekenschetsvanDriedimisdanook:

ÅDriedimiseenprogrammawaarmeevanuiteenvantevoren
aangemaaktebeschrijvingvaneenobjectopredelijkeenvoudige
wijzetekeningenvanditobjectgegenereerdkunnenworden.
Ä
Inditverhaalzaleen(watoperationele)beschrijvinggegeven
wordenvandefaciliteitenvanDriedim(secties2-6),alsmede
eenbeschrijvingvandeinvoertaal(sectie7).Eenvoorbeeld
vaneenobjectbeschrijvingisinAppendixAtevinden.
DaarervanwordtuitgegaandatelkeSTgebruikeronderhandwel
vertrouwdismetdeGEMterminologie(namenvanwindow
attributenendergelijke),wordendezewaarnodigzonder
uitleggebruikt.OokopstandaardGEMprocedures,zoals
fileselectorafhandelingenmenukeuze,wordtnietingegaan.


Å2)ÄâStartÄ.

Objectbescrijvingenmoetenzichineenfilebevindenomte
kunnenwordengelezendoorDriedim(aanbevolenextensievan
ditsoortfilesis".PLT").

DirectnahetopstartenvanDriedimwordtomeenfilegevraagd
waarindegewensteobjectbeschrijvingkanwordengevonden.De
heleverderesessiehandeltverdermetdenuingevoerde
beschrijving:dezewordtingelezen,gecontroleerdopfouten,
enindienfoutvrijkanbegonnenwordenmethetgenererenvan
tekeningen(zieverder).Omeennieuwobjecttebekijkenmoet
desessiebeâindigd-eneennieuweopgestartworden.

Å
Notes:Ä

-Aangezienelkekeerbijinlezenvolledigopfoutenwordt
gecontroleerdenhetparsenvantekstenzowiezoeendure
operatieis,kandeinleesfasewatlangduren.Hoewel
uiteraardergonomischonverantwoord,wordtnoggeenenkele
informatieoverdevorderingenvandeparsergetoond.

-Meldingenvandoordeparsergevondenfoutenverschijnen
vooralsnogophetscherm.

IneeneventuelevolgendeversievanDriedimzullendezezaken
zijnopgelost.


Å3)ÄâBewegeninDrieDimwereldÄ.

Omhetvolgendebetertekunnenbeschrijvenwordtdegebruiker
vannuafaanbeschouwdalseenobservatorinhetcoordinaten
stelselvanhetingelezenobject,diezichopelkogenblikop
eenbepaaldepositiebevindtenineenbepaalderichting
kijkt.Hetgenererenvannieuweaangezichtenkandanworden
beschouwdalshetbewegenvandezeobservatordoorhet
coordinatenstelsel.

Zodradebeschrijvingsuccesvolisingelezen,wordteenGEM
windowgeopendmeteeneerstegezichtophetingelezenobject.
Ditwindowtoontopelkmomenthetbeelddatdeobservatorvan
hetobjectheeft,metdeonderdelenvanhetobjectdiezichin
dekijkrichtingbevindeninhetmidden.

Veranderingenvanpositieofkijkrichtingkunnenworden
bewerktstelligdmetbehulpvandewindowattributen,demuis
cursorenhetinvulformulierdatdoor"ÅSetviewparameters
...Ä"ondermenutitel"ÅViewparmsÄ"tevoorschijngetoverdkan
worden:


âMuiscursorÅ:Ä
Zodrademuiscursorinhettekengebiedvanhetgeopende
windowgeplaatstwordt,verandertdecursorvormvanpijlin
eenaanwijskruis.Eenklikopdelinkermuisknopverplaatst
dekijkrichtingnaarhetaangewezendeelvanhetgetekende
object.Depositievandeobservatorveranderthierdoorniet.


âSlidersÅ:Ä
Debeideslidersstaaninhetmiddenvanhunscrollbars.Met
deslidersishetmogelijkd.m.v.elevatieenrotatieinhet
grondvlakdekijkrichtingteveranderen:

-Elevatievankijkrichtingkanhierwordenbeschouwdalshet
op-ofneerkijkenvandeobservator.Eenuitwijkingvande
verticalesliderbewerktstelligteenelevatievande
kijkrichtingvan0tot90gradenomhoog,corresponderendmet
eenuitwijkingomhoogvandeslider,ofvan0tot90graden
omlaag,corresponderendmeteenuitwijkingomlaagvande
slider.

-Rotatievankijkrichtingkanwordenbeschouwdalshet
draaienvandeobservatoromeenasloodrechtophet
grondvlak.Eenuitwijkingvandehorizontaleslider
bewerktstelligteenrotatievandekijkrichtingvan0tot
180gradennaarrechts,corresponderendmeteenuitwijking
naarrechtsvandeslider,ofvan0tot180gradennaar
links,corresponderendmeteenuitwijkingnaarlinksvande
slider.Eenmaximaleuitwijkingineenvanderichtingen
zorgtvooreenrotatievan180graden:deobservatorkeert
zichom.
âArrowsenscrollbarsÅ:Ä
Eenpositieveranderingvandeobservatorismogelijkdooreen
bewegingvandeobservatorineenvandezesrichtingen:

-Naarlinksofnaarrechts,loodrechtopdekijkrichting,
-Naarbovenofnaarbeneden,loodrechtopdekijkrichting,
-Indekijkrichting,ofomgekeerd.

Deeersteviersoortenbewegingenkunnenwordengemaaktdoor
middelvanklikkenopdepijlenvanhetwindow,delaatste
tweedoormiddelvanklikkenopdevertikalescrollbar(boven
deslider:beweeginkijkrichting,onderdeslider:beweeg
terug).Klikkenopdehorizontalescrollbarheeftgeeneffect
opdeobservator,maargenereertwäleenniewetekening.Dit
kansomshandigzijnalsvaneenbestaandetekeningeenHLR
versiegemaaktmoetworden(zieverder).

Deafstandwaaroverdeobservatorelkekeerbewogenwordt,kan
wordeningesteldmet"ÅSetviewparameters..."Ä(zieverder).


âViewparametersÅ.Ä
Inhetinvulformulieronder"ÅSetviewparameters...Ä"kunnende
positievandeobservatoreneenpuntindekijkrichting
directingegevenworden.HiermeeishetmogelijkominÇÇn
keereendrastischeveranderingvanpositieenkijkrichtingte
bewerkstelligen.

Metditformulierkunnenookwordengewijzigd:
-dezoomfactor:eenvergrotingsfactorvanhetgetoondebeeld,
-destapgroottewaarmeemetdepijlenendescrollbars
bewogenkanworden(zievorigealinea).

Aangezienhetgenererenvaneennieuwetekeningsomsenige
tijdkanduren(zekermethiddenlineremoval),ishet
volgendenuttigomteweten:
Å
IndienmetâOKÅhetformulierwordtverlaten,wordtgeennieuwe
tekeninggegenereerdindiendepositiesvandeobservatorof
hetbekekenpuntnietechtzijnveranderd.
Ä

Å4)ÄâHiddenlineremovalÄ.

Hetismogelijkom,zodraeennieuwetekeningwordt
gegenereerd,dedoorvlakkenverborgendelenvanhetobject
uitdetekeningtelatenverwijderen(hiddenlineremoval).
Ditkangebeurendoorinmenumettitel"ÅHLRÄ"hetmenuitem
"ÅHiddenlineremovalonÄ"vaneenvink(checkmark)te
voorzien.Aangezienhiddenlineremovaloverhetalgemeeneen
tijdrovendkarweiis,wordthiddenlineremovalautomatisch
uitgezetnadeeerstvolgendegeneratievaneentekening.Om
dittevoorkomenmoetmen"ÅAutomaticHLRresetÄ"uitzetten
(onderzelfdemenutitel);hiddenlineremovalblijftdanaan
totdathetexplicietwordtuitgezet.

Hiddenlineremovalwordtbewerkstelligddooreennieuwe
projectie(tekening)tegenererenmetextrainformatieoverde
aanwezigevlakken(ditwordtnormaaluittijdsbesparings
oogpuntachterwegegelaten).Daarnawordtelkindetekening
aanweziglijnstukafzonderlijkwordtafgedektdoordeze
vlakken.Hetafdekkingsproceswordtzichtbaargemaaktdooreen
lijntellertelatenlopenbovenaanhetscherm.Pasnaafloop
wordtdenieuwetekeningookwerkelijkuitgetekend.

ÅNote:Ä
Degebruiktemethodeisoverhetalgemeentragerdanhetook
welgebruikte"paintersalgorithme",datdeinhetobject
aanwezigevlakkenvan"voornaarachter"uittekentopeen
devicewaaropmenkan"verven"(bvdemonitor).Afgedekte
delenwordenzo"overgeverfd"doorhetvlakdatzeafdekt.Dit
algorithmeishierechternietgebruikt,omdatdriedimookeen
plottermoetkunnenaansturen.Enplotterskunnenniet
verven..



Å5)âPicturemodeÄ:

Somsishetnodigeengegenereerdetekeningnogwataante
passenalvorenshemuitteprinten,zonderspeciaaleennieuwe
tekeningaantemaken.Bijvoorbeeldomeenstukjevande
tekeningvergroottebekijken.Ditismogelijkindezgn.
ÅÄ"ÅPicturemodeÄ",ondermenutitel"ÅViewparmsÄ".Indepicture
modeishetideevaneenobservatorindeDriedimwereld
tijdelijkverlaten,enschuiftdegegenereerdetekeningachter
hetwindowheenenweer.Defunctievandevolgendewindow
attributenisveranderd:

-ÅArrowsÄ:Schuivenhetwindow1/10êeÄvanzijngrootteinde
aangegevenrichting.
-ÅScrollbarsÄ:Schuivenhetwindow1/1êeÄvanzijngrootteinde
aangegevenrichting.Menkanzobv.tweenaastliggende
stukkenuitprintenm.b.v."ÅPrintscreenÄ",enaanelkaar
plakken.
-ÅSlidersÄ:Hiermeekanhetwindoweenvariabelstukverschoven
worden(eenpixelafstand,gelijkaandeuitwijkingvande
slider).
-ÅMousecursorÄ:Hiermeekaneenaangewezenpuntvande
tekeninggecentreerdworden.

Å6)ÄâDiversenÄ:

Devolgendeitemskanmennogonderdeverschillendemenu
titelstegenkomen:

-ÅPrintscreen:ÄStuurteenscreendumpnaardeprinter;muis
cursorwordtuitgeschakeld.
Å
-Outputplotfile:ÄVraagteenfilenaamvooreeneenaante
makenplotfile(weigertnaamvanbestaandefile)(aanbevolen
extensie:"Å.LNSÄ").Genereertdaneentextfile,bestaandeuit
coordinatenvanbegin-eneindpuntvanelklijnstukinde
huidigetekening,inhetvolgendeformat:

Å{XbYbXeYe<LF>}

Xb,Yb,Xe,Ye:INTEGER;Ä

Metelklijnstukindetekeningcorrespondeerteenregelin
deplotfilebestaandeuitx-enycoordinatenvanbegin-en
eindpuntvanhetlijnstuk,ineencoordinatenstelselmet
hetmiddelpuntvanhetkijkwindowalsoorsprongeneenheid
1/10pixel.Dusalshetkijkwindowinhetmiddenvanhet
schermstaat,heeftdelinkerbovenhoekvanhetscherm
coordinaten(-3200,2000)inditstelsel(inhigh
resolution).


Å-Deleteplotfile:ÄHiermeekunnenfilesvanschijfverwijderd
worden.
Å
-Full/NormalView:ÄInFullviewmodewordtdetekening
opgeblazentotmaximalegrootte;allewindowattributen
wordenverwijderd.Normalviewhersteltdeoudesituatie.

Å-Crosshair:ÄToonteenpaarkruisdraden,diedekijkrichting
aanwijzen.

Å7)ÄâDeDrieDimsourceÄ.

DeobjectbeschrijvingenvoorDriedimzijnprogramma'sineen
eenvoudigebeschrijvingstaal,dieindezesectiegedefinieerd
zalworden.DesyntaxwordtgegeveninEBNF(ExtendedBackus
NaurForm,ziebv.[1]).Desemantiekwordterinformeelbij
verteld:

-EenobjectbeschrijvingiseenÅDDDProgramÄindevolgende
zin:

ÅDDDProgram=[SizeDirective";"]Object.



Ä-EenSizeDirectivedientomeenwerkgeheugenvaneenbepaalde
groottevoordevolgendesessieteclaimen.Deeenheidis
kilobyte,endefaultis100:
Å
SizeDirective="HEAPSIZE"HeapSize.
HeapSize=Integer.



Ä-EenObjectiseenstructuur,diebestaatuiteenaantal
onderdelen(de"Parts",zieverder).Hetistoegestaan
lokaalhulpobjectentedefinieren,dieverderin
DeclarationsenPartsgebruiktmogenworden(maarniet
buitendeobjectdefinitiewaarinzegedefinieerdworden).
Zgn."forwardreferences"zijnniettoegestaan(vgl.de
scopevanproceduresinPASCALprogramma's):
Å
Object="OBJECT"Identifier"="
[Declarations]
Parts
"OBEND".

Declarations={Object";"}.
Parts=Part{";"Part}.



Ä-Objectsmogenbestaanuit:
a)Andereobjecten,
b)Lijnen,
c)Vlakken:
Å
Part=ObjectPart
|LinePart
|PlanePart.



Ä-Eenanderobject,datgebruiktwordtalsdeelvaneenobject
mageerstnogwatgetransformeerdworden.Toegestaanzijn:

a)Translatieovereenbepaaldevectortr,door"ATtr",
b)Vermenigvuldiginginx-y-en/ofzrichtingmetfactoren
respfx,fyenfz,door"TIMESfxfyfz",
c)Rotatieomdez-asovereenhoekang(ingraden)tegende
wijzersvandeklok,vandepositievez-richtinggezien,
door"TURNang":
Å
ObjectPart=Identifier
["AT"Point]
["TIMES"Point]
["TURN"Angle].



Ä-EenLinePartiseenpolylijn,eenaantalverbonden
lijnsegmenten(minimaal1).Dezewordtgespecificeerddoor
deknikpunten(waaronderbegrependebegin-eneindpunten)
involgordeoptesommen:

ÅLinePart="LINE"
Point","Point
{","Point}
"ENDLINE".



Ä-Eenpolygonwordtgespecificeerddoordecontour(als
polylijn).VoorlokalehiddenlineremovalkÖneenvlakvan
eenonzichtbarekantwordenvoorziendooreenwillekeurig
puntaandezeonzichtbarekantalsInternPointoptegeven:
hetvlakisdanonzichtbaarvoorobservatorsdieaan
dezelfdekantvanhetvlakstaan.Opdezewordtopeen
redelijkgoedkopemaniereendeelvanhetwerkvande
tijdrovendeächtehiddenlineremovalverricht.Zieookhet
voorbeeldinAppendixA.

ÅPlanePart="PLANE"
["INTERN"InternPoint","]
Point","Point","Point
{","Point}
"ENDPLANE".

InternPoint=Point.
Point=XValYValZVal.
Angle:Real.
XVal,YVal,ZVal:Real.


Note:ÄCommentaarmoetwordengemarkeerdmetaccolades,enis
nietrecursief.
Å

8)âOpmerkingenÄ.

-DriedimisgeheelgeschreveninMODULA-2.Hoewelverwacht
wordtdatsommigeroutinesinassemblysnellerzullenwerken
(speciaalalswordtgewerktmetintegerrepresentatievan
reals),isditnietgedaan.Teneerstehoudtdithet
programmanogenigzinsnaspeurbaarententweedeworden
zekergeenordessnelheidswinstverwacht.

-Erwordtnietgecontroleerdopheapoverflow.Zorgdusvoor
voldoendewerkruimte(met"ÅHEAPSIZEÄ").

-WaarschijnlijkdoorafrondingsfoutenwerktHLRniethelemaal
alsverwacht.Hierdoorkanincidenteeleenlijnsegment
wegvallen.

-Driedimispublicdomainsoftwareenmagvrijworden
verspreid,opvoorwaardedatdezenietwordtveranderd
zondercontactoptenemenmetondergetekende.
Å
Ä-Graagzouikhorenvan(positieveofnegatieve)ervaringen:

JuulvanderSpek,
deKreyenbeek257,
5553BGValkenswaard,
(Mei1986).


âReferencesÅ:

[1]ProgramminginMODULA-2Ä,
NiklausWirth,
SpringerVerlag.


âAppendixAÅ:ÄEenvoorbeeld.

Hetvolgendetoontalsvoorbeeldeenbeschrijvingvaneen
blokkenwereld:


ÅOBJECTÄblokkenwereld=

ÅOBJECTÄblok={eenheidskubusmetmidden}
{vangrondvlakinO}
Å
OBJECTÄwand={eenheidsvierkantopx=1}Å
PLANEÄ{fungeertalszijvlak}Å
INTERNÄ000,{nietzichtbaar}
10.50,{vanuitoorsprong}
10.51,
1-0.51,
1-0.50,
10.50Å
ENDPLANE
OBENDÄ{wand};Å
Ä
wand;
wandÅTURNÄ90;
wandÅTURNÄ180;
wandÅTURNÄ270;
Å
PLANEÄ{bovenvlak}Å
INTERNÄ000,
-0.5-0.51,
-0.50.51,
0.50.51,
0.5-0.51,
-0.5-0.51
ÅENDPLANE
OBENDÄ{blok;eindescopevanwand};Å

ÄblokÅTIMESÄ12100;{eenhÇÇÇlehoge}Å
ÄblokÅATÄ101010{eengeroteerde}
ÅTURNÄ45;Å
ÄblokÅATÄ100010000{eneenverre}Å

OBENDÄ{blokkenwereld}Å


Ä
