.TH CITADEL 1 foo bar "FNORDADEL BBS SOFTWARE"
.SH NAME
citadel.tos - main Fnordadel bbs program
.SH SYNOPSIS
citadel [+backup] [+debug] [+door] [+hup] [+line] [+multi] [+netdebug]
[+netlog] [+purge] [+restrict] [+ymodem] [+zap] [foo]
.SH DESCRIPTION
Citadel is the main Fnordadel BBS program.  It expects to find
the table file (ctdltabl.sys) in the current directory.  If it
can't find it, it will complain and exit.  You must run configur
in this case to regenerate the tables.  Ctdltabl.sys will be read
and erased by citadel when it runs; when it exits, ctdltabl.sys
will be rewritten.  This prevents the use of old system tables
in the event of a serious crash.
.SH OPTIONS
.IP +backup
use [B]ackup instead of old [U]ngoto command; U now means [U]pload
.IP +debug
general debugging flag
.IP +door
execute Fnordadel as a door from within some other
program, presumably another BBS; avoids all normal modem control and
exits when the user terminates, returning control to the
calling program 
.IP +hup
causes Fnordadel to lower the modem DTR line when it exits (disabling
modem autoanswer)
.IP +line
turn on the status bar
.IP +multi
indicates that you're running Fnordadel in the background under some sort of
multitasking system (e.g. MX2, Amulti)
.IP +netdebug
debugging specifically for the network stuff
.IP +netlog
instructs Fnordadel to keep a log of network activity in the file
`netlog.sys' in #auditdir
.IP +purge
enable automatic message purging for those users specified in
#sysdir\\purge.sys
.IP +restrict
enable login restriction to those users specified in #sysdir\\restrict.sys
.IP +ymodem
enable the use of ymodem in networking
.IP +zap
turn on the network loop-zapper
.IP foo
any miscellaneous character or word that doesn't start with '+' or '-';
Fnordadel takes this as a sign that the BBS has recovered from a
crash, and generates an Aide> message to that affect; generally supplied
from inside a batch file or shell script that detected a "crash" exit
value and recovered the system
.SH EXIT STATUS
Citadel returns various exit values depending on why it is exiting.
The following are predefined:

.DT
.ta \w'255\ \ \ \ \ 'u
.br
0	Normal exit.  The Sysop used [Q] from the Sysop
.br
	menu to bring the BBS down.
.br
1	#timeout exit.  You have defined a timeout (see
.br
	Chapter 8 of the Manual) and a timeout has
.br
	occurred.
.br
2	Crash exit.  The BBS has crashed, but gracefully.
.br
	Hints on why it crashed may be (possibly) found in
.br
	the file `crash' in the current directory.
.br
3	Remote exit.  A Sysop has used the [Q] command as
.br
	above, but was logged in on the modem at the time.
.br
255	Absolutely Grotesquely Ugly exit.  The BBS has
.br
	crashed, not at all gracefully.  There might* be
.br
	something in `crash' to tell you why, but there
.br
	probably isn't.
.br
.PP
In addition, you may define any number of other exit values.  See
"Chapter 8: Events" in the Reference Manual for more on this.
.PP
In all cases except the Absolutely Grotesque (255), citadel writes the table
file (ctdltabl.sys) to the current directory when it exits.  If it doesn't
write ctdltabl.sys, you have to run configur to regenerate the tables.
.SH BUGS
The +door option can not be used to call Fnordadel as a door from
within itself or STadel, due to the way the door code sets things up.
.PP
The +multi option may or may not work with any given multi-tasker.  We
have put very little effort into supporting this sort of thing, which
was started by orc.
.PP
A really nasty situation will arise if your BBS disk or hard drive
partition runs out of free space.  The code currently won't detect
this fact, and will blithely continue trying to run.  Things will
probably screw up soon, and when the board comes down, ctdltabl.sys
can't be written out since there's no room left.
.SH FILES
.DT
.ta \w'configur.tos\ \ \ 'u
.br
citadel.tos	main BBS program
.br
configur.tos	configuration program
.br
ctdltabl.sys	table file, read & written by citadel,
.br
	regenerated by configur
.br
.SH SEE ALSO
.DT
.ta \w'configur.man\ \ \ 'u
.br
configur.man	man page for configur
.br
The Fnordadel Reference Manual
.br
.SH AUTHORS
Fnordadel is maintained by Adrian Ashley (elim @ secret) and
Royce Howland (Mr. Neutron @ RT).
.PP
Fnordadel is directly descended from STadel by David Parsons,
which is in turn directly descended from Citadel-86 by Hue, Jr.,
which is in ITS turn descended from Citadel by CrT.
