<TITLE>Misc Extension Instructions.</TITLE>
<H1>MISC extension...</H1>

<H2>Contents</H2>

<UL>
<LI><A HREF="#intro">Introduction.</A>
<LI><A HREF="#commands">Command Descriptions.</A>
  <UL>
  <LI><A HREF="#fadd">A=f add(B,C)</A>
  <LI><A HREF="#fdv">A=f dv(B,C)</A>
  <LI><A HREF="#fmul">A=f mul(B,C)</A>
  <LI><A HREF="#fsub">A=f sub(B,C)</A>
  <LI><A HREF="#fxed">X=fxed(Y)</A>
  <LI><A HREF="#fxdtoint">X=fxdtoint(Y)</A>
  </UL>
<LI><A HREF="#history">Version history.</A>
<LI><A HREF="#soon">Comming soon.</A>
<LI><A HREF="#end">End bit...</A>
</UL>

<HR>

<A NAME="intro">
<H2>Introduction.</H2>

This is a STOS extension which I have written to contain all the odds
and ends which I think deserve to be in a STOS extension, but are not
Falcon specific, and so do not belong in my other extension. As I am
only distributing this to registered users of my Falcon extension, I
guess you already know about it...<P>

To install the extension just stick MISC.EXW into the STOS directory,
and MISC.ECW into the compiler directory (if you haven't got the compiler,
get it - NOW!)<P>

At this time, the only working commands are <A HREF="#fxed">fixed point
</A> maths routines.<P>

<HR>

<A NAME="commands">
<H2>Command Descriptions</H2>


<A NAME="fadd">
<H3>A=f add(b,c)</H3>

This function takes two fixed point numbers (see <A HREF="#fxed">below</A>)
and adds them together.


<A NAME="fdv">
<H3>A=f dv(B,C)</H3>

This function returns the fixed point value of B divided by C. (For more
information about fixed numbers see <A HREF="#fxed">below</A>)

<A NAME="fmul">
<H3>A=f mul(B,C)</H3>

This function returns the fixed point value of B multiplied by C. (For more
information about fixed numbers see <A HREF="#fxed">below</A>)

<A NAME="fsub">
<H3>A=f sub(B,C)</H3>

This function returns the fixed point value of C subtracted from B (ie B-C).
(For more information about fixed numbers see <A HREF="#fxed">below</A>)

<A NAME="fxed">
<H3>X=fxed(Y)</H3>

When programming, it is often necessary to think about speed, as well as
accuracy - Floating point maths is notorously slow without a specific piece
of hardware to do it for you (an FPU). Integers are quick, but cannot
represent fractions - thus, SIN and COS functions are out of the window!
The solution to this problem is to use fixed point numbers - these are
similar to integers, and are quick to calculate, yet can represent a limited
range of fractions as well.<P>

This extension implements some fixed point maths routines. The values are
stored in normal integer variables. I have implemented a 32-bit fixed point
format, with the binary point in the middle.ie<P>

<PRE>
x x x x x x x x x x x x x x x x . x x x x x x x x x x x x x x x x
 16-bit 2's complement integer              16-bit fraction
</PRE>

Thus, the range of the format is from -32768 to 32767, with the smallest
possible fraction being 1/32768. (I think these figures are right...) Thus,
it is quite possible to do calculations envolving trig. functions, or divisons
in a fast way.<P>

Accuracy is not perfect with fixed point, and it cannot handle either very
large, or very small values, but is sufficiently accurate to enable fractal
calculations, zooming and other mathematically based algorithms to be
performed at a reasonable speed.<P>

This function takes a value (currently, only integers are supported), and
it returns the fixed point equivelent. For optimum speed, any constants
should be pre-calculated, and used directly.<P>

<H3>X=fxedtoint(Y)</H3>

This function returns the (rounded) integer equivelent of the given fixed
point number. (For more details on fixed point numbers, see <A HREF="fxed">
above</A>


<HR>

<A NAME="history">
<H2>Version history.</H2>

I'm afraid I cannot remember exactly when I started work on this, but it
must have been about June '95...<P>

<DL>
<DT>V0.1
    <DD>Implemented most fixed point routines.<BR>
        Some functions used for testing STOS Falcon Extension commands.
<DT>V0.2
    <DD>Made the compiler version and this manual.    
</DL>

<HR>

<A NAME="soon">
<H2>Comming soon.</H2>

Or, not, as the case may be... I dont often do anything to this extension,
as it is not my main project, but here are some ideas that I have... If
there is something particular that you would like to see here, tell me,
and I'll see what I can do...<P>

<UL>
<LI>Replacement IKBD routine - Source by Yannis - better than STOS's one!
<LI>RGB -> HSV -> RGB conversion code.
<LI>More fixed point maths routines.
</UL>

<HR>

<A NAME="end">
<H2>The End Bit...</H2>

Yes, well, not much of an extension, I know, but where else should this
stuff go??? If you want to contact me, you should already have my address,
but just in case you've lost it:<P>

Home address:<P>

Anthony Jacques<BR>
70 West Avenue<BR>
Oldfield Park<BR>
Bath, Avon<BR>
BA2 3QD<P>

Term-time 95/96 address:<P>

Anthony Jacques<BR>
25 Balleratt Street<BR>
Levenshulme<BR>
Manchester<BR>
M19 3DF<P>

Email and WWW:<P>

Email: jacquesa@cs.man.ac.uk<BR>
WWW: http://www.cs.man.ac.uk<P>